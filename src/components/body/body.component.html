<datatable-selection
#selector
[selected]="selected"
[rows]="rows"
[selectCheck]="selectCheck"
[selectEnabled]="selectEnabled"
[selectionType]="selectionType"
[rowIdentity]="rowIdentity"
(select)="select.emit($event)"
(activate)="activate.emit($event)">
    <datatable-progress
    *ngIf="loadingIndicator">
    </datatable-progress>
    <datatable-scroller
    *ngIf="rows?.length"
    [scrollbarV]="scrollbarV"
    [scrollbarH]="scrollbarH"
    [scrollHeight]="scrollHeight"
    [scrollWidth]="columnGroupWidths.total"
    (scroll)="onBodyScroll($event)">
    <datatable-row-wrapper
        [groupedRows]="groupedRows"
        *ngFor="let group of temp; let i = index; trackBy: rowTrackingFn;"
        [innerWidth]="innerWidth"
        [ngStyle]="getRowsStyles(group)"
        [rowDetail]="rowDetail"
        [groupHeader]="groupHeader"
        [offsetX]="offsetX"
        [detailRowHeight]="getDetailRowHeight(group[i],i)"
        [row]="group"
        [expanded]="getRowExpanded(group)"
        [rowIndex]="getRowIndex(group[i])"
        (rowContextmenu)="rowContextmenu.emit($event)">
        <datatable-body-row 
        *ngIf="!groupedRows; else groupedRowsTemplate"        
        tabindex="-1"
        [isSelected]="selector.getRowSelected(group)"
        [innerWidth]="innerWidth"
        [offsetX]="offsetX"
        [columns]="columns"
        [rowHeight]="getRowHeight(group)"
        [row]="group"
        [rowIndex]="getRowIndex(group)"
        [expanded]="getRowExpanded(group)"            
        [rowClass]="rowClass"
        [displayCheck]="displayCheck"
        (activate)="selector.onActivate($event, indexes.first + i)">
        </datatable-body-row>
        <ng-template #groupedRowsTemplate>
        <datatable-body-row
            *ngFor="let row of group.value; let i = index; trackBy: rowTrackingFn;"
            tabindex="-1"
            [isSelected]="selector.getRowSelected(row)"
            [innerWidth]="innerWidth"
            [offsetX]="offsetX"
            [columns]="columns"
            [rowHeight]="getRowHeight(row)"
            [row]="row"
            [group]="group.value"
            [rowIndex]="getRowIndex(row)"
            [expanded]="getRowExpanded(row)"
            [rowClass]="rowClass"
            (activate)="selector.onActivate($event, i)">
        </datatable-body-row>
        </ng-template>
    </datatable-row-wrapper>
    </datatable-scroller>
    <div
    class="empty-row"
    *ngIf="!rows?.length"
    [innerHTML]="emptyMessage">
    </div>
</datatable-selection>
